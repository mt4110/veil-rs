{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Worklist V1",
  "description": "A list of actionable improvement items for the next development phase, generated from dogfood metrics.",
  "type": "object",
  "required": [
    "v",
    "week_id",
    "generated_at",
    "items"
  ],
  "properties": {
    "v": {
      "type": "integer",
      "const": 1,
      "description": "Schema version"
    },
    "week_id": {
      "type": "string",
      "pattern": "^\\d{4}-W\\d{2}-Tokyo$",
      "description": "The week ID this worklist belongs to (e.g. 2025-W52-Tokyo)"
    },
    "generated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO8601 timestamp of generation"
    },
    "git_sha": {
      "type": "string",
      "description": "Git commit SHA of the codebase that generated this list"
    },
    "items": {
      "type": "array",
      "description": "Ranked list of work items",
      "items": {
        "type": "object",
        "required": [
          "rank",
          "action_id",
          "title",
          "score",
          "signals"
        ],
        "properties": {
          "rank": {
            "type": "integer",
            "minimum": 1
          },
          "action_id": {
            "type": "string",
            "description": "Stable ID for the action (e.g. A-LOCK-001)"
          },
          "title": {
            "type": "string",
            "description": "Short human-readable title of the task"
          },
          "score": {
            "type": "integer",
            "description": "Calculated priority score"
          },
          "playbook_ref": {
            "type": "string",
            "description": "Relative path to documentation or playbook"
          },
          "suggested_paths": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of file globs or paths related to this item"
          },
          "signals": {
            "type": "object",
            "description": "Raw metrics used for scoring",
            "required": [
              "count_now",
              "delta"
            ],
            "properties": {
              "count_now": {
                "type": "integer"
              },
              "delta": {
                "type": "integer"
              },
              "hint_key": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}
