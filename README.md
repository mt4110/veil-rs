# veil-rs ğŸ›¡ï¸
English README is available [here](README_EN.md).

**veil-rs** ã¯ã€é–‹ç™ºè€…ãŠã‚ˆã³ä¼æ¥­ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ å‘ã‘ã«è¨­è¨ˆã•ã‚ŒãŸã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‹ã¤é«˜æ€§èƒ½ãªã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«å«ã¾ã‚Œã‚‹æ©Ÿå¯†æƒ…å ±ï¼ˆAPIã‚­ãƒ¼ã€å€‹äººæƒ…å ±ã€ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ç­‰ï¼‰ã‚’é©šç•°çš„ãªé€Ÿåº¦ã§æ¤œå‡ºã—ã¾ã™ã€‚

## ç‰¹å¾´
- **ğŸš€ çˆ†é€Ÿã‚¹ã‚­ãƒ£ãƒ³**: Rustè£½ã§ä¸¦åˆ—å‡¦ç†ã¨æ­£è¦è¡¨ç¾æœ€é©åŒ–ã‚’é§†ä½¿ã—ã€å¤§è¦æ¨¡ãƒªãƒã‚¸ãƒˆãƒªã‚‚ç¬æ™‚ã«ã‚¹ã‚­ãƒ£ãƒ³ã€‚
- **ğŸ‡¯ğŸ‡µ æ—¥æœ¬ã®å€‹äººæƒ…å ±ã«å¯¾å¿œ**: ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã€é‹è»¢å…è¨±è¨¼ç•ªå·ã€ä½æ‰€ã€é›»è©±ç•ªå·ãªã©ã®æ—¥æœ¬å›ºæœ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’é«˜ç²¾åº¦ã«æ¤œå‡ºã€‚
- **ğŸ‘® å•†ç”¨ã‚°ãƒ¬ãƒ¼ãƒ‰æ©Ÿèƒ½**: TOMLã«ã‚ˆã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«å®šç¾©ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç„¡è¦–æ©Ÿèƒ½ (`# veil:ignore`)ã€å•†ç”¨ãƒ¬ãƒ™ãƒ«ã®ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›ã€‚
- **ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½**: æ©Ÿæ¢°å‡¦ç†å¯èƒ½ãª JSON å‡ºåŠ›ã«åŠ ãˆã€æå‡ºç”¨ã¨ã—ã¦ãã®ã¾ã¾ä½¿ãˆã‚‹ HTML ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (`--format html`) ã‚’ç”Ÿæˆå¯èƒ½ã€‚
- **ğŸ”§ å®Œå…¨è¨­å®šå¯èƒ½**: `veil.toml` ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã®ç´°ã‚„ã‹ãªèª¿æ•´ãŒå¯èƒ½ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ“ãƒ«ãƒ‰
git clone https://github.com/takem1-max64/veil-rs.git
cd veil-rs
cargo install --path crates/veil-cli --bin veil
```

## ä½¿ã„æ–¹

### åŸºæœ¬ã‚¹ã‚­ãƒ£ãƒ³
```bash
veil scan .
```

### JSON å‡ºåŠ›
```bash
veil scan . --format json
```

### HTML ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (ç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆç”¨)
```bash
veil scan . --format html > report.html
open report.html
```

## å•†ç”¨é‹ç”¨ã‚¬ã‚¤ãƒ‰

### 1. ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«ã®è¿½åŠ  (Pure TOML)
Rust ã®ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ãªãã€`veil.toml` ã«è¨˜è¿°ã™ã‚‹ã ã‘ã§ç‹¬è‡ªã®æ¤œçŸ¥ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã§ãã¾ã™ã€‚ç¤¾å†…ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚„ç‰¹å®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ¤œå‡ºã«æœ€é©ã§ã™ã€‚

```toml
[rules.internal_project_id]
enabled = true
description = "ç¤¾å†…ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID (PROJ-XXXX)"
pattern = "PROJ-\\d{4}"
severity = "high"
score = 80
category = "internal"
tags = ["proprietary"]
```

### 2. ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç„¡è¦–æ©Ÿèƒ½ (èª¤æ¤œçŸ¥å¯¾å¿œ)
ã‚³ãƒ¼ãƒ‰å†…ã®ã‚³ãƒ¡ãƒ³ãƒˆã§ã€ç‰¹å®šã®è¡Œã®æ¤œçŸ¥ã‚’ç„¡åŠ¹åŒ–ã§ãã¾ã™ã€‚

```rust
let fake_key = "AKIA1234567890"; // veil:ignore
let test_token = "ghp_xxxxxxxx"; // veil:ignore=github_personal_access_token
```

*   `// veil:ignore`: ãã®è¡Œã®ã™ã¹ã¦ã®æ¤œçŸ¥ã‚’ç„¡è¦–ã—ã¾ã™ã€‚
*   `// veil:ignore=rule_id`: æŒ‡å®šã—ãŸãƒ«ãƒ¼ãƒ«IDã®æ¤œçŸ¥ã®ã¿ã‚’ç„¡è¦–ã—ã¾ã™ã€‚

### 3. CI/CD ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
GitHub Actions ã‚„ GitLab CI ã§ã™ãã«ä½¿ãˆã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ `examples/ci/` ã«ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚

**GitHub Actions ã®ä¾‹:**
```yaml
- name: Veil Security Scan
  run: |
    # HTMLãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆï¼ˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆä¿å­˜ç”¨ï¼‰
    veil scan . --format html > report.html
    # ã‚¹ã‚³ã‚¢80ä»¥ä¸Šã®æ¤œå‡ºãŒã‚ã‚Œã°å¤±æ•—ã•ã›ã‚‹ï¼ˆCIç”¨ï¼‰
    veil scan . --fail-score 80
```


### 4. Git ãƒ•ãƒƒã‚¯ (pre-commit)
`pre-commit` ã‚’ä½¿ç”¨ã—ã¦ã€ã‚³ãƒŸãƒƒãƒˆå‰ã«è‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚
`.pre-commit-config.yaml` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š

```yaml
repos:
  - repo: local
    hooks:
      - id: veil-scan
        name: veil-scan
        entry: veil scan
        language: system
        types: [text]
        exclude: '\.git/|\.png$|\.jpg$'
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
Apache 2.0 ã¾ãŸã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§ã™ã€‚
