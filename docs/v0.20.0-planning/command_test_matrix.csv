case_id,group,command,scenario,fixture,net,platform,expect_exit,expect_artifacts,expect_signals,priority,status,notes
CTM-0001,scan,"veil scan .",基本スキャンが完走し、出力が安定する,repo root,optional,any,0,-,"contains: ""scanned_files"" 等",P0,todo,
CTM-0002,scan,"veil scan . --format html > report.html",HTMLレポート生成,repo root,optional,any,0,report.html,"file exists & non-empty",P1,todo,
CTM-0003,scan,"veil --no-color scan crates/veil-cli/tests/cmd/fixtures/clean --format json",JSONコントラクト出力（決定論的fixture）,crates/veil-cli/tests/cmd/fixtures/clean/,optional,any,0,-,"valid json",P0,pass,trycmd: crates/veil-cli/tests/cmd/smoke_scan_json.toml
CTM-0004,scan,"veil scan . --format markdown",PR貼付用Markdown,repo root,optional,any,0,-,"contains: ""|"" table",P2,todo,
CTM-0005,scan,"veil scan <DIRECTORY>",ディレクトリスキャンがハングしない,fixtures/dir/,optional,any,0,-,"finishes < timeout",P0,todo,旧ハング系の回帰ガード
CTM-0006,scan,"veil scan . --staged",staged限定スキャン,git staged present,optional,any,0,-,"scans only staged",P1,todo,staged作る前提
CTM-0007,scan,"veil scan . --fail-score 1",fail-score閾値でexit制御,fixtures/findings/,optional,any,1,-,"contains: ""fail score""",P0,todo,findings誘発fixture必要
CTM-0008,scan,"veil --no-color scan .",無彩色出力（global flag位置も安全側で固定）,repo root,optional,any,0,-,"no ANSI escape",P2,todo,
CTM-0009,scan,"veil --quiet scan .",静音モード（global flag位置も安全側で固定）,repo root,optional,any,0,-,"minimal output",P2,todo,
CTM-0010,init,"veil init --wizard",ウィザードが完走して設定生成,empty tmp dir,optional,any,0,"veil.toml 等","prompts ok",P1,todo,対話はE2E枠
CTM-0011,init,"veil init --profile Logs",Logs pack生成,empty tmp dir,optional,any,0,rules/log/,"dir exists",P0,todo,
CTM-0012,init,"veil init --ci github",workflow生成,repo root,optional,any,0,.github/workflows/veil.yml,"contains: tag-pinned install",P0,todo,
CTM-0013,filter,"veil --no-color filter < crates/veil-cli/tests/cmd/fixtures/log.txt",ログ秘匿が安定（置換一貫）,crates/veil-cli/tests/cmd/fixtures/log.txt,optional,any,0,-,"contains: ""<REDACTED>"" 等",P0,pass,trycmd: crates/veil-cli/tests/cmd/smoke_filter.toml
CTM-0014,mask,"veil --no-color mask --dry-run crates/veil-cli/tests/cmd/fixtures/secret.txt",マスクプレビューが安全,crates/veil-cli/tests/cmd/fixtures/secret.txt,optional,any,0,-,"does NOT leak raw secret",P0,pass,trycmd: crates/veil-cli/tests/cmd/smoke_mask_dryrun.toml
CTM-0015,check,"veil check-project",衛生診断が動く,repo root,optional,any,0,-,"contains: gitignore/ci hints",P1,todo,
CTM-0016,guardian,"veil guardian check fixtures/package-lock.json",NPM OSVチェック（cleanなら0 / findingなら1）,fixtures/package-lock.json,required,any,0/1,-,"contains: vuln summary",P0,todo,net有り前提
CTM-0017,guardian,"veil guardian check fixtures/package-lock.json --offline",cache-onlyで安全終了,fixtures/package-lock.json + cache,offline,any,0/1,-,"fails safely on cache miss",P0,todo,cache準備が鍵
CTM-0018,guardian,"veil guardian check fixtures/package-lock.json --osv-details",詳細取得ON,fixtures/package-lock.json,required,any,0/1,-,"includes vuln details",P1,todo,
CTM-0019,guardian,"VEIL_OSV_FORCE_REFRESH=1 veil guardian check fixtures/package-lock.json",強制更新,fixtures/package-lock.json,required,any,0/1,-,"shows refreshed/fetched",P2,todo,CI向け
CTM-0020,guardian,"veil guardian check fixtures/package-lock.json --debug-metrics",メトリクス出力,fixtures/package-lock.json,optional,any,0/1,-,"contains: timings/req counts",P2,todo,
CTM-0021,meta,"cargo test --workspace",全体テスト,repo root,optional,any,0,-,"all tests pass",P0,todo,
CTM-0022,meta,"cargo fmt && cargo clippy -D warnings",フォーマット&lint,repo root,optional,any,0,-,"no warnings",P0,todo,
CTM-0023,nix,"nix run .#status && nix run .#check && nix run .#go-test",nix系コマンド健全性,repo root,optional,any,0,"artifacts per tool","pass outputs",P1,todo,nix環境前提
CTM-0024,meta,"veil --help",helpが出る,-,optional,any,0,-,"contains: Usage/Commands",P0,pass,trycmd: crates/veil-cli/tests/cmd/help.toml
CTM-0025,meta,"veil --version",versionが出る,-,optional,any,0,-,"contains: semver",P0,pass,trycmd: crates/veil-cli/tests/cmd/smoke_version.toml
CTM-0026,config,"veil --no-color config check",config/rules妥当性検証,repo root,optional,any,0,-,"contains: rule counts",P0,pass,trycmd: crates/veil-cli/tests/cmd/smoke_config_check.toml
CTM-0027,config,"veil config dump",設定ダンプ,repo with veil.toml,optional,any,0,-,"valid json/toml output",P2,todo,
CTM-0028,rules,"veil rules list",適用ルール一覧,repo root,optional,any,0,-,"list of rules",P1,todo,
CTM-0029,rules,"veil rules explain <RULE_ID>",ルール詳細,-,optional,any,0,-,"explanation text",P2,todo,
CTM-0030,git,"veil git scan",Git履歴スキャン,git repo,optional,any,0,-,"default to HEAD",P1,todo,
CTM-0031,doctor,"veil doctor",システム診断,-,optional,any,0,-,"system info",P1,todo,
CTM-0032,ignore,"veil ignore <PATH>",パス除外追加,repo root,optional,any,0,veil.toml,"modifies veil.toml",P1,todo,
CTM-0033,pre-commit,"veil pre-commit init",Pre-commit hook設置,git repo,optional,any,0,.git/hooks/pre-commit,"file created",P1,todo,
CTM-0034,fix,"veil fix",自動修正（デフォルトはDRY-RUN）,repo with findings,optional,any,0,-,"prints would-fix / apply hint",P1,todo,--apply は別caseで
CTM-0035,triage,"veil triage",対話的トリアージ,repo with findings,optional,any,0,-,"interactive prompt",P1,todo,TUI/Interactive
CTM-0036,update,"veil update",更新チェック（スタブ：ネット不要）,-,optional,any,0,-,"update info",P2,todo,
