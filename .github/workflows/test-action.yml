name: Test GitHub Action

on:
    push:
        branches:
            - main
            - develop
    pull_request:

jobs:
    scan-action:
        runs-on: ubuntu-latest
        name: Test Veil Action
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Run Veil Scan (Action)
              uses: ./ # Uses the action in the current root
              with:
                  target: "."
                  config: "veil.toml"
                  # Test action execution - allows failure for repos with test fixtures
              continue-on-error: true
